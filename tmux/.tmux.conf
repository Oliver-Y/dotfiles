# Ensure Homebrew bash is available for plugins that need bash 4+
set-environment -g PATH "/opt/homebrew/bin:/usr/local/bin:/usr/bin:/bin"

unbind r
bind r source-file ~/.tmux.conf

set -g prefix C-s

# act like vim
setw -g mode-keys vi

unbind '"'
unbind %
bind | split-window -h
bind - split-window -v
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind X kill-window
set -g mouse on

set-option -g status-position bottom

# --- Quality of life ---
set -sg escape-time 10                          # near-instant Esc for vim
set -g focus-events on                          # let vim detect focus
set -g history-limit 50000                      # 50k scrollback (was 2000)
set -g set-clipboard on                         # OSC 52 clipboard passthrough
set -g default-terminal "tmux-256color"         # proper term type
set -ag terminal-overrides ",xterm-256color:RGB" # true color support
set -g renumber-windows on                      # no gaps in window numbers

# prefix+q shows pane numbers for 3 seconds instead of 1
set -g display-panes-time 3000

# List of plugins (all declarations MUST come before run tpm)
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'janoamaral/tokyo-night-tmux'
set -g @plugin 'tmux-plugins/tmux-yank'

# Tokyo Night config (day = light variant to match terminal theme)
set -g @tokyo-night-tmux_theme "night"
set -g @tokyo-night-tmux_show_datetime 1
set -g @tokyo-night-tmux_date_format MYD
set -g @tokyo-night-tmux_time_format 12H
set -g @tokyo-night-tmux_show_path 1
set -g @tokyo-night-tmux_path_format relative
set -g @tokyo-night-tmux_window_id_style digital
set -g @tokyo-night-tmux_pane_id_style hsquare
set -g @tokyo-night-tmux_zoom_id_style dsquare

# Initialize TMUX plugin manager
run '~/.tmux/plugins/tpm/tpm'

# --- Pane identification (must be AFTER tpm to override plugin defaults) ---
set -g pane-active-border-style "fg=#7aa2f7,bold"
set -g pane-border-style "fg=#3b4261"
set -g pane-border-status top
set -g pane-border-format " #[bold]#{pane_index}#[default] #{pane_current_command} "
set -g display-panes-active-colour "#7aa2f7"
